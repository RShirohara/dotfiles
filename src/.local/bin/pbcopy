#!/usr/bin/env bash
# System clipboard integration
#
# Support Platforms:
# - X11 (xclip)
# - Wayland (wl-copy)
# - WSL (clip.exe)
# - Termux (termux-clipboard-set)
#
# Usage:
#   <command> | pbcopy      - copy stdin to clipboard.

if [[ "${DISPLAY:-}" && -x $(command -v xclip) ]]; then
    xclip -in -selection clipboard < "${1:-/dev/stdin}"
elif [[ "${WAYLAND_DISPLAY:-}" && -x $(command -v wl-copy) ]]; then
    wl-copy < "${1:-/dev/stdin}"
elif [[ $OSTYPE == linux* && $(uname -r) == *[Mm]icrosoft* ]]; then
    clip.exe < "${1:-/dev/stdin}"
elif [[ $OSTYPE == linux-android* && -x $(command -v termux-clipboard-set) ]]; then
    cat - | termux-clipboard-set
fi
